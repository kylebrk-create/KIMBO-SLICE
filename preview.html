<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<title>Elenack Motorplex — Template Preview</title>
<style>
  :root{
    --bg:#0f1115; --paper:#12161d; --ink:#e6edf3; --muted:#9aa7b2; --line:#1f2630;
    --brand:#C4162A; --navy:#9bb5ff; --gold:#B8860B;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
  .bar{position:sticky;top:0;z-index:8;display:flex;gap:12px;align-items:center;padding:12px 16px;border-bottom:1px solid var(--line);background:rgba(15,17,21,.9);backdrop-filter:blur(8px)}
  .brand{display:flex;align-items:center;gap:10px;color:inherit;text-decoration:none;font-weight:800}
  .brand img{height:28px}
  .wrap{display:grid;grid-template-columns:1fr 360px;gap:0;min-height:calc(100vh - 56px)}
  .stage{padding:20px;display:grid;place-items:start;overflow:auto}
  .frame{width:100%;max-width:820px;min-height:90vh;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#0b0f14}
  .frame iframe{display:block;width:100%;height:100vh;border:0;background:#fff}
  .specs{border-left:1px solid var(--line);background:#0b0f14;color:#c7d1ff;padding:20px 18px;overflow:auto;box-shadow:-4px 0 12px rgba(0,0,0,.5)}
  .specs h2{margin:0 0 12px;font-size:18px;color:#fff}
  .specs h3{margin:18px 0 6px;font-size:14px;color:#9bb5ff}
  .specs p,.specs li{font-size:14px;line-height:1.5;color:#a8b3c2}
  .pill{display:inline-block;padding:2px 8px;border-radius:999px;background:#1f2630;font-size:12px;color:#c7d1ff}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:12px;color:#b8c1cc}
  .ok{color:#22c55e}.warn{color:#f59e0b}.no{color:#ef4444}
  @media (max-width:980px){.wrap{grid-template-columns:1fr}.specs{border-left:none;border-top:1px solid var(--line)}}
</style>
<script>
  const qs = new URLSearchParams(location.search);
  let tpl = qs.get('tpl') || qs.get('template') || '';
  const id = qs.get('id') || '';

  // Normalize for GitHub Pages: remove leading / and ensure relative path
  if (tpl.startsWith('/')) tpl = tpl.replace(/^\/+/, '');
  if (!tpl.startsWith('./') && !tpl.startsWith('../')) tpl = './' + tpl;

  const iframe = document.getElementById('frame');
  const srcLink = document.getElementById('open-src');
  const err = document.getElementById('err') || (function(){
    const d=document.createElement('div');
    d.id='err';
    d.style.cssText='margin:12px 16px;padding:12px;border:1px solid #3b4352;background:#1a2332;color:#e6edf3;border-radius:8px;';
    d.hidden=true;
    document.querySelector('.stage')?.prepend(d);
    return d;
  })();

  async function loadTpl(){
    if(!tpl){
      err.hidden=false;
      err.innerHTML='No template specified. Use <code>?tpl=templates/your-file.html</code>.';
      return;
    }
    srcLink && (srcLink.href = tpl, srcLink.textContent = tpl);

    try{
      const r = await fetch(tpl, {cache:'no-store'});
      if(!r.ok){
        err.hidden=false;
        err.innerHTML=`Could not load <code>${tpl}</code> (HTTP ${r.status}). Check filename/case in <code>/templates</code>.`;
        return;
      }
      iframe.src = tpl;
    }catch(e){
      err.hidden=false;
      err.textContent = `Network error loading ${tpl}: ` + e;
    }
  }
  document.addEventListener('DOMContentLoaded', loadTpl);
</script>


</head>
<body>
  <div class="bar">
    <a class="brand" href="./">
      <img src="./assets/elenack-logo-light.svg" alt="Elenack Motorplex">
      <span>Template Preview</span>
    </a>
    <div style="margin-left:auto"><a href="./">← Back to Gallery</a></div>
  </div>
  <div class="wrap">
    <section class="stage"><div class="frame"><iframe id="frame" title="Template preview"></iframe></div></section>
    <div id="err" hidden style="margin:12px 16px; padding:12px; border:1px solid #3b4352; background:#1a2332; color:#e6edf3; border-radius:8px;">
  <!-- Error text injected by script -->
</div>
    <aside class="specs" aria-labelledby="title">
      <h2 id="title">Template Preview</h2>
      <h3>Image Specs</h3><ul id="img-list"></ul>
      <h3>Email Best Practices (built-in)</h3>
      <ul>
        <li><span class="ok">✓</span> 600px max width</li>
        <li><span class="ok">✓</span> Bulletproof VML buttons</li>
        <li><span class="ok">✓</span> Preheader text (85–130 chars)</li>
        <li><span class="ok">✓</span> Live text for key copy</li>
        <li><span class="ok">✓</span> ALT text on images</li>
        <li><span class="ok">✓</span> CAN-SPAM footer</li>
      </ul>
      <h3>File Types & Sizes</h3>
      <ul><li>Photos: <strong>JPG 80–85%</strong>. Logos/UI: <strong>PNG</strong>. Avoid WebP.</li><li>Hero &lt; 200 KB; total images &lt; 1.2 MB.</li><li>Set explicit <code class="mono">width</code> and <code class="mono">style="height:auto"</code>.</li></ul>
      <h3>Repeatable Editing Process</h3>
      <ol><li>Duplicate a template in <code class="mono">/templates</code>.</li><li>Swap hero, copy, and links (+UTMs).</li><li>Set preheader.</li><li>Verify footer address & unsubscribe.</li><li>Send tests to Gmail + Outlook.</li></ol>
      <h3>Source File</h3><p><a id="open-src" href="#" target="_blank" rel="noopener">Open raw HTML</a></p>
    </aside>
  </div>
</body>
</html>
